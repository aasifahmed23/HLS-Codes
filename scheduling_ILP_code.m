clc; clear all; close all;
% vars = [O_11, O_21, O_32, O_43, O_54, O_61, O_62, O_72, O_73, O_81, O_82, O_83, O_92, O_93, O_94];
timesteps=4;
operators=9;
% vars=timesteps*(operators+1);
% O_ij=zeros(operators,timesteps);
% O = cell(operators,timesteps);
%% Range Expressions
% O(1,1)=1; => x(1)=1
% O(2,1)=1; => x(2)=1
% O(3,2)=1; => x(3)=1
% O(4,3)=1; => x(4)=1
% O(5,4)=1; => x(5)=1
% O(6,1)+O(6,2)=1; => x(6)+x(7)=1
% O(7,2)+O(7,3)=1; => x(8)+x(9)=1
% O(8,1)+O(8,2)+O(8,3)=1; => x(10)+x(11)+x(12)=1
% O(9,2)+O(9,3)+O(9,4)=1; => x(13)+x(14)+x(15)=1
% Equalities 
Aeq=[ 
1,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,1,0,0,0,0,0,0,0,0,0,0,0,0,0; 
0,0,1,0,0,0,0,0,0,0,0,0,0,0,0; 
0,0,0,1,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,1,0,0,0,0,0,0,0,0,0,0; 
0,0,0,0,0,1,1,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,1,1,0,0,0,0,0,0; 
0,0,0,0,0,0,0,0,0,1,1,1,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,1,1,1];
beq = [1,1,1,1,1,1,1,1,1];
%% 
% O(1,1)+O(2,1)O(6,1)<= t1_max ; => x(1)+x(2)+x(6)<= t1_max
% O(8,1)<= t3_max ; => x(10)<= t3_max
% O(6,2)<= t1_max ; => x(7)<= t1_max
% O(3,2)+O(7,2)<= t2_max ; => x(3)+x(8)<= t2_max
% O(8,2)<= t3_max ; => x(11)<= t3_max
% O(9,2)<= t4_max ; => x(13)<= t4_max
% O(7,3)<= t2_max ; => x(9)<= t2_max
% O(4,3)+O(8,3)<= t3_max ; => x(4)+x(12)<= t3_max
% O(9,3)<= t4_max ; => x(14)<= t4_max
% O(5,4)<= t3_max ; => x(5)<= t3_max
% O(9,4)<= t4_max ; => x(15)<= t4_max
b = [t1_max,t3_max,t1_max,t2_max,t3_max,t4_max,t2_max,t3_max,t4_max,t3_max,t4_max];
A=[ 
1,1,0,0,0,1,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,1,0,0,0,0,0; 
0,0,0,0,0,0,1,0,0,0,0,0,0,0,0; 
0,0,1,0,0,0,0,1,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,1,0,0,0,0; 
0,0,0,0,0,0,0,0,0,0,0,0,1,0,0;
0,0,0,0,0,0,0,0,1,0,0,0,0,0,0; 
0,0,0,1,0,0,0,0,0,0,0,1,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,1,0;
0,0,0,0,1,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];

%%
cost_coeffs=ones(1,operators);

% equality constraints:
% O_11 =1 -> Aeq ROW 1 :  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
% O_21 =1 -> Aeq ROW 2 :  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0; 0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
% O_32 =1 -> Aeq ROW 3 :  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
% 0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0; 0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0;
Aeq=[ 
1,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
0,1,0,0,0,0,0,0,0,0,0,0,0,0,0; 
0,0,1,0,0,0,0,0,0,0,0,0,0,0,0; 
0,0,0,1,0,0,0,0,0,0,0,0,0,0,0;
0,0,0,0,1,0,0,0,0,0,0,0,0,0,0; 
0,0,0,0,0,1,1,0,0,0,0,0,0,0,0;
0,0,0,0,0,0,0,1,1,0,0,0,0,0,0; 
0,0,0,0,0,0,0,0,0,1,1,1,0,0,0;
0,0,0,0,0,0,0,0,0,0,0,0,1,1,1 ];
beq = [1,1,1,1,1,1,1,1,1];
% Inequality constraints:
A=[
    1,1,0,0,0,1,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,1,0,0,0,0,0;
    0,0,0,0,0,0,1,0,0,0,0,0,0,0,0;
    0,0,1,0,0,0,0,1,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,1,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,1,0,0;
    0,0,0,0,0,0,0,0,1,0,0,0,0,0,0;
    0,0,0,1,0,0,0,0,0,0,0,1,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,1,0;
    0,0,0,0,1,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,1;
    0,0,0,0,0,1,2,-2,-3,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,1,2,3,-2,-3,-4
    ];
b = [t1_max,t3_max,t1_max,t2_max,t3_max,t4_max,t2_max,t3_max,t4_max,t3_max,t4_max,-1,-1];
